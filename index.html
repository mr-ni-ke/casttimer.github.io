<!DOCTYPE html>
<html>
  <head>
    <base target="_top" />
    <meta name="google-signin-client_id" content="619365294529-aq28ud62bftedigk08olqfdsfmjaae32.apps.googleusercontent.com" />
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
      :root {
        --bg-color: white;
        --text-color: #222;
        --input-border: #ccc;
      }

      body {
        background-color: var(--bg-color);
        color: var(--text-color);
        font-family: sans-serif;
        margin: 0;
        padding: 2rem;
      }

      input, button {
        border: 1px solid var(--input-border);
        padding: 0.5rem;
        font-size: 1rem;
      }

      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <div id="login" style="margin-bottom: 2rem;"></div>

    <div id="app" class="hidden">
      <h1>Добро пожаловать, <span id="user-name"></span></h1>
      <p>Язык: <span id="user-lang"></span></p>
      <!-- Твой основной функционал -->
    </div>

    <script>
      window.onload = function () {
        google.accounts.id.initialize({
          client_id: "619365294529-aq28ud62bftedigk08olqfdsfmjaae32.apps.googleusercontent.com",
          callback: handleCredentialResponse,
          auto_select: false,
        });

        google.accounts.id.prompt();
      };

      function handleCredentialResponse(response) {
        const id_token = response.credential;

        fetch("https://script.google.com/macros/s/AKfycbwICu4aWpfQgjpc5vNrVLmUZ3aLjTOqeXsqGQ_NXet0PEyY_gLHEUD2Henn2HfwCkn_Wg/exec", {
          method: "POST",
          mode: "no-cors", // вынуждено из-за ограничений CORS
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ id_token }),
        });

        // Предварительно отображаем интерфейс (без проверки, т.к. из-за `no-cors` мы не получим ответ)
        document.getElementById("login").classList.add("hidden");
        document.getElementById("app").classList.remove("hidden");

        // Временно отображаем фиктивные данные (если хочешь — убери)
        document.getElementById("user-name").innerText = "Пользователь";
        document.getElementById("user-lang").innerText = "RU";
      }
    </script>
  </body>
</html>
